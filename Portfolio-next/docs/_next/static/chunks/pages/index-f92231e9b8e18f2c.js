(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{1761:e=>{e.exports={renderer:"Renderer_renderer__uc_W2","mute-button":"Renderer_mute-button__PnuEQ","css-output":"Renderer_css-output__lxgge","webgl-output":"Renderer_webgl-output__AqTdm"}},5213:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e0});var i=n(6029),s=n(5669),r=n.n(s),a=n(5729),o=n(3720),l=n(1761),c=n.n(l),u=n(2343);function h(e){return{ok:!0,value:e}}function d(e,t){e&&e.postMessage(t,"*")}let m=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),p=e=>e.preventDefault(),f=e=>{e.style.touchAction="none",e.addEventListener("touchstart",p),e.addEventListener("touchmove",p),e.addEventListener("touchend",p),e.addEventListener("touchcancel",p)},g=e=>{e.style.touchAction="initial",e.removeEventListener("touchstart",p),e.removeEventListener("touchmove",p),e.removeEventListener("touchend",p),e.removeEventListener("touchcancel",p)};function v(e,t,n){let i=0,s=!1;return!function r(){let a=e();t(a.slice(0,++i)),i<a.length&&!1===s&&setTimeout(r,n)}(),()=>{s=!0}}function w(e){return e.filter(e=>null!==e).join(" ")}function x(e){d(document.getElementById("operating-system-iframe").contentWindow,e)}var b=n(3133),y=n(3832),C=n(1263),_=n(7042);let S={uniforms:{sourceTexture:{value:null},sourceDepthMap:{value:null},cutoutDepthMap:{value:null}},vertexShader:"out vec2 texCoord;\n\nvoid main() {\n    texCoord = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"uniform sampler2D sourceTexture;\nuniform sampler2D sourceDepthMap;\n\nuniform sampler2D cutoutDepthMap;\n\nin vec2 texCoord;\n\nlayout(location = 0) out vec4 diffuseColor;\n\nvoid main() {\n    float sourceDepth = 1.0 - texture2D(sourceDepthMap, texCoord).r;\n    float cutoutDepth = 1.0 - texture2D(cutoutDepthMap, texCoord).r;\n\n    bool isCutout = sourceDepth >= cutoutDepth;\n\n    if (isCutout) {\n        diffuseColor = texture2D(sourceTexture, texCoord);\n    } else {\n        diffuseColor = vec4(.0, .0, .0, .0);\n    }\n}\n"};class E extends _.o{render(e,t,n){e.setRenderTarget(this.sourceTarget),e.render(this.sourceScene,this.camera),e.setRenderTarget(this.sourceDepthTarget),e.render(this.sourceScene,this.camera),e.setRenderTarget(this.cutoutTarget),e.render(this.cutoutScene,this.camera),this.uniforms.sourceTexture.value=this.sourceTarget.texture,this.uniforms.sourceDepthMap.value=this.sourceDepthTexture,this.uniforms.cutoutDepthMap.value=this.cutoutDepthTexture,this.fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this.fsQuad.render(e)}setSize(e,t){this.sourceTarget.setSize(e,t),this.cutoutTarget.setSize(e,t)}dispose(){this.material.dispose(),this.fsQuad.dispose()}constructor(e,t,n,i,s){super(),this.sourceDepthTarget=null,this.sourceScene=e,this.cutoutScene=t,this.camera=n,this.sourceTarget=new o.nWS(i,s,{depthBuffer:!0,samples:4}),this.sourceDepthTexture=new o.VCu(i,s,o.bkx),this.sourceDepthTarget=new o.nWS(i,s,{depthBuffer:!0,depthTexture:this.sourceDepthTexture,samples:0}),this.cutoutDepthTexture=new o.VCu(i,s,o.bkx),this.cutoutTarget=new o.nWS(i,s,{depthBuffer:!0,depthTexture:this.cutoutDepthTexture,samples:0}),this.uniforms=o.LlO.clone(S.uniforms),this.material=new o.BKk({defines:{},uniforms:this.uniforms,vertexShader:S.vertexShader,fragmentShader:S.fragmentShader,glslVersion:o.Wdf}),this.fsQuad=new _.F(this.material)}}var M=n(3779),D=n(6233);class P extends M.p{updateUniformResolution(e,t){let n=window.devicePixelRatio;this.material.uniforms.resolution.value.x=1/(e*n),this.material.uniforms.resolution.value.y=1/(t*n)}setSize(e,t){this.updateUniformResolution(e,t)}constructor(e,t){super(D.o),this.updateUniformResolution(e,t)}}var T=function(e){return e.CameraCollidable="camera_collidable",e}({}),L=n(2521);function j(e,t,n){return(1-n)*e+n*t}function O(e,t,n){let i=1-Math.pow(1-n,3);return(1-i)*e+i*t}class F{getTarget(){return this.target}getOrigin(){return this.origin}getCamera(){return this.camera}getScene(){return this.scene}getCutoutScene(){return this.cutoutScene}enableDamping(){this.dampingEnabled=!0}disableDamping(){this.dampingEnabled=!1}isCameraFollowEnabled(){return this.cameraFollowEnabled}enableCameraFollow(){this.isCameraFollowEnabled()||this.syncFollowPositionToTarget(),this.cameraFollowEnabled=!0}disableCameraFollow(){this.cameraFollowEnabled&&this.syncTargetToFollowPosition(),this.cameraFollowEnabled=!1}syncFollowPositionToTarget(){this.targetFollowPosition.copy(this.target),this.cameraFollowPosition.copy(this.target)}syncTargetToFollowPosition(){this.target.copy(this.targetFollowPosition)}enableCameraFollowLimitMovementSpeed(){this.cameraFollowLimitMovementSpeed=!0}disableCameraFollowLimitMovementSpeed(){this.cameraFollowLimitMovementSpeed=!1}setCameraFollowMaxMovementSpeed(e){this.cameraFollowMaxMovementSpeed=e}moveCameraForward(e){let t=e*Math.sin(this.spherical.theta),n=e*Math.cos(this.spherical.theta);this.panOffset.x-=t,this.panOffset.z-=n}moveToHeight(e){let t=this.target.y-e;this.moveCameraUp(t)}moveCameraUp(e){this.panOffset.y+=e}moveCameraLeft(e){let t=this.spherical.theta+(0,L.pu)(90),n=e*Math.sin(t),i=e*Math.cos(t);this.panOffset.x-=n,this.panOffset.z-=i}rotateCamera(e,t){this.enabled&&(this.sphericalDelta.phi-=e,this.sphericalDelta.theta-=t)}rotateCameraUp(e){this.enabled&&(this.sphericalDelta.phi-=e)}setRotationTheta(e){if(!this.enabled)return;let t=e-this.spherical.theta;this.sphericalDelta.theta=t}setRotationPhi(e){if(!this.enabled)return;let t=e-this.spherical.phi;this.sphericalDelta.phi=t}rotateCameraLeft(e){this.enabled&&(this.sphericalDelta.theta-=e)}autoZoom(e,t,n,i){let s=null!=n?n:j,r=0,a=this.currentZoomDistance,o=n=>{let o=Math.min((r+=1e3*n)/t,1);this.currentZoomDistance=s(a,e,o);let l=1===o;return l&&void 0!==i&&i(),{done:l,blocking:!1}};this.actions.push(o)}transition(e,t,n,i,s,r){let a=null!=s?s:j,o=0,l=this.cameraFollowEnabled?this.targetFollowPosition.clone():this.target.clone(),c=this.spherical.clone(),u=this.currentZoomDistance;this.setOriginToPosition(e);let h=s=>{o+=1e3*s;let h=0!==i?Math.min(o/i,1):1,d=a(l.x,e.x,h),m=a(l.y,e.y,h),p=a(l.z,e.z,h),f=a(c.phi,t.phi,h),g=a(c.theta,t.theta,h);this.panOffset.x=-(this.target.x-d),this.panOffset.y=-(this.target.y-m),this.panOffset.z=-(this.target.z-p),this.sphericalDelta.phi=-(this.spherical.phi-f),this.sphericalDelta.theta=-(this.spherical.theta-g),this.currentZoomDistance=j(u,n,h);let v=1===h;return v&&void 0!==r&&r(),{done:v,blocking:!0}};this.actions.push(h)}getPanOffset(){return this.panOffset}setPanOffsetX(e){this.panOffset.setX(e)}setPanOffsetY(e){this.panOffset.setY(e)}setPanOffsetZ(e){this.panOffset.setZ(e)}setMinZoom(e){this.minZoomDistance=e}getMinZoom(){return this.minZoomDistance}setMaxZoom(e){this.maxZoomDistance=e}getMaxZoom(){return this.maxZoomDistance}getZoom(){return this.currentZoomDistance}updateOrigin(){this.setOriginToPosition(this.target)}setOriginToPosition(e){this.origin.copy(e)}resetOriginBoundary(){this.setOriginBoundaryX(null),this.setOriginBoundaryY(null),this.setOriginBoundaryZ(null)}getOriginBoundaryX(){return this.originBoundaryX}setOriginBoundaryX(e){this.originBoundaryX=e}getOriginBoundaryY(){return this.originBoundaryY}setOriginBoundaryY(e){this.originBoundaryY=e}getOriginBoundaryZ(){return this.originBoundaryZ}setOriginBoundaryZ(e){this.originBoundaryZ=e}setZoom(e){this.currentZoomDistance=(0,L.qE)(e,this.minZoomDistance,this.maxZoomDistance)}zoom(e){let t=this.calculateRadiusLimit(this.currentZoomDistance)+e;this.currentZoomDistance=(0,L.qE)(t,this.minZoomDistance,this.maxZoomDistance)}isTransitioning(){return this.hasActions()}hasActions(){return this.actions.length>0}getAction(){return this.actions[0]}popAction(){return this.actions.shift()}processActions(e){if(!this.hasActions())return;let t=this.getAction()(e);this.enabled=!t.blocking,!0===t.done&&this.popAction(),!0!==t.done||this.hasActions()||(this.enabled=!0)}update(e){this.processActions(e);let t=this.dampingFactor,n=new o.Pq0;function i(e,t,n){let i=n<=t+e;return i&&n>=t-e?n:t+(i?-e:e)}if(n.copy(this.cameraPosition).sub(this.target),n.applyQuaternion(this.quat),this.spherical.setFromVector3(n),this.dampingEnabled?(this.spherical.theta+=this.sphericalDelta.theta*t,this.spherical.phi+=this.sphericalDelta.phi*t):(this.spherical.theta+=this.sphericalDelta.theta,this.spherical.phi+=this.sphericalDelta.phi),this.spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this.spherical.phi)),this.spherical.makeSafe(),this.spherical.radius=this.calculateRadiusLimit(this.currentZoomDistance),n.setFromSpherical(this.spherical),n.applyQuaternion(this.quatInverse),this.dampingEnabled?this.target.addScaledVector(this.panOffset,t):this.target.add(this.panOffset),this.originBoundaryX&&this.target.setX(i(this.originBoundaryX,this.origin.x,this.target.x)),this.originBoundaryY&&this.target.setY(i(this.originBoundaryY,this.origin.y,this.target.y)),this.originBoundaryZ&&this.target.setZ(i(this.originBoundaryZ,this.origin.z,this.target.z)),this.cameraFollowEnabled){let e=new o.Pq0;if(e.copy(this.target).sub(this.targetFollowPosition),this.cameraFollowLimitMovementSpeed){let t=this.cameraFollowMaxMovementSpeed;e.x=(0,L.qE)(e.x,-t,t),e.y=(0,L.qE)(e.y,-t,t),e.z=(0,L.qE)(e.z,-t,t)}e.multiplyScalar(this.cameraFollowDampingFactor),this.targetFollowPosition.add(e);let t=new o.Pq0;t.copy(this.targetFollowPosition).sub(this.cameraFollowPosition),t.multiplyScalar(this.cameraFollowDampingFactor),this.cameraFollowPosition.add(t),this.cameraPosition.copy(this.target).add(n),this.camera.position.copy(this.cameraFollowPosition).add(n),this.camera.lookAt(this.targetFollowPosition)}else this.cameraPosition.copy(this.target).add(n),this.camera.position.copy(this.cameraPosition),this.camera.lookAt(this.target);this.dampingEnabled?(this.sphericalDelta.theta*=1-t,this.sphericalDelta.phi*=1-t,this.panOffset.multiplyScalar(1-t)):(this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0))}constructor(e,t,n){this.camera=e,this.scene=t,this.cutoutScene=n,this.actions=[],this.enabled=!0,this.target=new o.Pq0(0,0,0),this.cameraFollowEnabled=!1,this.cameraFollowLimitMovementSpeed=!0,this.cameraFollowMaxMovementSpeed=.35,this.cameraFollowDampingFactor=.05,this.targetFollowPosition=new o.Pq0(0,0,0),this.cameraFollowPosition=new o.Pq0(0,0,0),this.cameraPosition=new o.Pq0(0,0,0),this.dampingEnabled=!1,this.dampingFactor=.225,this.origin=new o.Pq0(0,0,0),this.originBoundaryX=null,this.originBoundaryY=null,this.originBoundaryZ=null,this.spherical=new o.YHV,this.sphericalDelta=new o.YHV,this.panOffset=new o.Pq0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI-(0,L.pu)(45),this.quat=new o.PTz().setFromUnitVectors(this.camera.up,new o.Pq0(0,1,0)),this.quatInverse=this.quat.clone().invert(),this.minZoomDistance=2.5,this.maxZoomDistance=15,this.currentZoomDistance=10,this.calculateRadiusLimit=(()=>{let e=new o.tBo,t=new o.YHV,n=new o.Pq0,i=(0,L.pu)(2.5),s=new o.tBo,r=new o.YHV,a=new o.Pq0,l=(0,L.pu)(2.5),c=e=>{for(let t=0;t<e.length;t++){let n=e[t];if(n.object.userData[T.CameraCollidable])return n}return null};return o=>{var u,h;e.far=o,s.far=o,t.copy(this.spherical).phi+=i,r.copy(this.spherical).phi-=l,n.setFromSpherical(t).normalize(),a.setFromSpherical(r).normalize(),e.set(this.target,n),s.set(this.target,a);let d=c(e.intersectObjects(this.scene.children)),m=c(s.intersectObjects(this.scene.children));return Math.min(null!=(u=null==d?void 0:d.distance)?u:o,null!=(h=null==m?void 0:m.distance)?h:o)}})()}}class B{static fromTouchData(e){if(e.hasTouchesDown(1)){let t=e.touches[0],n=t.x,i=t.y;return new B(n,i,n,i)}let t=e.touches.map(e=>e.x),n=e.touches.map(e=>e.y);return new B(Math.min(...t),Math.min(...n),Math.max(...t),Math.max(...n))}width(){return this.x2-this.x1}height(){return this.y2-this.y1}center(){return{x:this.x1+this.width()/2,y:this.y1+this.height()/2}}diagonal(){return Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))}constructor(e,t,n,i){this.x1=e,this.y1=t,this.x2=n,this.y2=i}}class R{subscribe(e){return this.handlers.push(e),()=>{this.unsubscribe(e)}}unsubscribe(e){this.handlers=this.handlers.filter(t=>t!==e)}emit(e){for(let t of this.handlers)t(e)}once(e){let t=n=>{e(n),this.unsubscribe(t)};this.subscribe(t)}constructor(){this.handlers=[]}}class k{static fromMouseData(e,t){let{x:n,y:i}=e.pointerCoordinates();return new k(n,i,t)}constructor(e,t,n){this.x=e,this.y=t,this.instruction=n}}class I{static fromTouchData(e,t,n,i){let s=e.pointerCoordinates();return new I(s.x,s.y,Date.now(),t,n,i)}constructor(e,t,n,i,s,r){this.x=e,this.y=t,this.creationTime=n,this.durationInMS=i,this.callbackSuccess=s,this.callbackCancelation=r}}class Z{static fromMouseEvent(e,t){return new Z(e,t.clientX,t.clientY,0,t.buttons)}static fromWheelEvent(e,t){return new Z(e,t.clientX,t.clientY,t.deltaY,t.buttons)}isPrimaryDown(){return(1&this.buttons)>0}isSecondaryDown(){return(2&this.buttons)>0}zoomDelta(){return .01*this.deltaY}pointerCoordinates(){return{x:this.x,y:this.y}}constructor(e,t,n,i,s){this.source=e,this.x=t,this.y=n,this.deltaY=i,this.buttons=s}}class z{static fromTouch(e){return new z(e.clientX,e.clientY)}constructor(e,t){this.x=e,this.y=t}}class A{static fromTouchEvent(e,t){let n=[];for(let e of t.touches){let t=z.fromTouch(e);n.push(t)}return new A(e,n,"self")}hasTouchesDown(e){return this.touches.length===e}hasMoreTouchesDownThan(e){return this.touches.length>e}boundingBox(){return B.fromTouchData(this)}pointerCoordinates(){let e=0,t=0,n=this.touches.length;for(let n of this.touches)e+=n.x,t+=n.y;return{x:e/n,y:t/n}}constructor(e,t,n){this.source=e,this.touches=t,this.origin=n}}let U=e=>({event:"touch_confirmation_event",data:e}),N=e=>({event:"mouse_confirmation_event",data:e}),q=()=>({event:"cancel_mouse_confirmation_event"}),W=e=>({event:"touch_event",data:e}),H=e=>({event:"mouse_event",data:e});class V{allowInput(){var e;return null!=(e=this.allowInputRef.current)&&e}create(){window.addEventListener("pointerdown",this.onPointerDownListener),window.addEventListener("pointerup",this.onPointerUpListener),window.addEventListener("pointermove",this.onPointerMoveListener),window.addEventListener("pointerleave",this.onPointerLeaveListener),window.addEventListener("contextmenu",this.onContextMenuListener),window.addEventListener("wheel",this.onWheelListener)}destroy(){window.removeEventListener("pointerdown",this.onPointerDownListener),window.removeEventListener("pointerup",this.onPointerUpListener),window.removeEventListener("pointermove",this.onPointerMoveListener),window.removeEventListener("pointerleave",this.onPointerLeaveListener),window.removeEventListener("contextmenu",this.onContextMenuListener),window.removeEventListener("wheel",this.onWheelListener)}dropPointerEvent(e){let t=!e.isPrimary,n="mouse"!==e.pointerType;return t||n}onPointerDown(e){if(!this.allowInput()||this.dropPointerEvent(e))return;let t=H(Z.fromMouseEvent("down",e));this.handler.emitUserInteractionEvent(t)}onPointerUp(e){if(!this.allowInput()||this.dropPointerEvent(e))return;let t=H(Z.fromMouseEvent("up",e));this.handler.emitUserInteractionEvent(t)}onPointerMove(e){if(!this.allowInput()||this.dropPointerEvent(e))return;let t=H(Z.fromMouseEvent("move",e));this.handler.emitUserInteractionEvent(t)}onPointerLeave(e){if(!this.allowInput()||this.dropPointerEvent(e))return;let t=H(Z.fromMouseEvent("leave",e));this.handler.emitUserInteractionEvent(t)}onContextMenu(e){this.allowInput()&&e.preventDefault()}onWheel(e){if(!this.allowInput())return;let t=H(Z.fromWheelEvent("wheel",e));this.handler.emitUserInteractionEvent(t)}constructor(e,t){this.allowInputRef=e,this.handler=t,this.onPointerDownListener=this.onPointerDown.bind(this),this.onPointerUpListener=this.onPointerUp.bind(this),this.onPointerMoveListener=this.onPointerMove.bind(this),this.onPointerLeaveListener=this.onPointerLeave.bind(this),this.onContextMenuListener=this.onContextMenu.bind(this),this.onWheelListener=this.onWheel.bind(this),this.create()}}class Y{isTransitioning(){return this.ctx.cameraController.isTransitioning()}constructor(e,t){this.manager=e,this.ctx=t}}class X extends Y{}var G=n(3601);let J="DisplayParent",K="Display";async function Q(e,t){let n=await e.textureLoader.loadAsync(t);return n.flipY=!1,n}async function $(e,t){return await e.gltfLoader.loadAsync(t)}function ee(e){for(let t of e.scene.children)t.userData[T.CameraCollidable]=!0}function et(e){return e.updateWorldMatrix(!0,!0),new o.NRn().setFromObject(e)}function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.002,i=et(t),s=et(e),r=s.getSize(new o.Pq0),a=s.getCenter(new o.Pq0),l=i.max.y+.5*r.y+n;e.position.y+=l-a.y,e.updateMatrixWorld()}function ei(e){let t=null;return e.traverse(e=>{"Desk"===e.name&&(t=e)}),t}function es(){return{downloader:null,builder:null,builderProcessTime:0}}let er=e=>{let t=new o.tBo,n=new o.I9Y;return i=>{var s;n.x=i.x/window.innerWidth*2-1,n.y=-(2*(i.y/window.innerHeight))+1;let r=e.cameraController.getCamera();t.setFromCamera(n,r);let a=null!=(s=t.intersectObjects(e.cameraController.getCutoutScene().children)[0])?s:null;return null!==a&&"Display"===a.object.name}};function ea(e){return e.hasTouchesDown(1)}function eo(e){return e.hasTouchesDown(2)}class el{static create(e,t){return new el(t,e.getZoom())}constructor(e,t){this.touchData=e,this.zoomDistance=t}}function ec(e){return"rpc"===e.origin}let eu=e=>{let t=e.children.find(e=>e.name===J);return null==t?void 0:t.children.find(e=>e.name===K)};function eh(e,t){let n=0,i=document.elementFromPoint(e,t);do{if(!i)break;if("BUTTON"===i.tagName)return!0;i=i.parentElement}while(n++<5);return!1}class ed extends Y{transition(){var e;this.ctx.enableWebGLPointerEvents();let t=new o.Pq0;t.y=6.8;let n=new o.YHV;n.phi=1,n.theta=0,this.ctx.cameraController.enableDamping(),this.ctx.cameraController.disableCameraFollow(),this.ctx.cameraController.setMinZoom(2),this.ctx.cameraController.setMaxZoom(15),this.ctx.cameraController.setOriginBoundaryX(40),this.ctx.cameraController.setOriginBoundaryY(40),this.ctx.cameraController.setOriginBoundaryZ(null),this.ctx.cameraController.transition(t,n,10,500),null==(e=document.activeElement)||e.blur()}handleDisplayClick(e){this.isOverDisplay(e)&&(this.clearMouseInstruction(),this.manager.changeState(ev.MonitorView))}moveCamera(e){let t=0,n=0,i=this.previousMovementData;null!==i&&(t=(e.y-i.y)*.005,n=(e.x-i.x)*.005),this.ctx.cameraController.moveCameraForward(t),this.ctx.cameraController.moveCameraLeft(n),this.previousMovementData=e}clearMoveCamera(){this.previousMovementData=null}rotateCamera(e){let t=0,n=0,i=this.previousRotationData;null!==i&&(t=(e.y-i.y)*.01,n=(e.x-i.x)*.01),this.ctx.cameraController.rotateCamera(t,n),this.previousRotationData=e}updateCursor(e){this.ctx.setCursor(this.isOverDisplay(e)?"pointer":"auto")}clearRotateCamera(){this.previousRotationData=null}onUserEvent(e){switch(e.event){case"mouse_event":return this.handleMouseEvent(e.data);case"touch_event":return this.handleTouchEvent(e.data)}}handleMouseUp(e){this.clearMoveCamera(),this.clearRotateCamera()}handleMouseDown(e){e.isPrimaryDown()&&this.handleDisplayClick(e)}clearMouseInstruction(){let e=q();this.manager.emitUserInteractionEvent(e)}handleMouseInstruction(e){let t=this.isOverDisplay(e);if(t!==this.wasOverDisplay)if(t){let t=N(k.fromMouseData(e,"Click to zoom in"));this.manager.emitUserInteractionEvent(t)}else this.clearMouseInstruction();this.wasOverDisplay=t}handleMouseMove(e){e.isPrimaryDown()&&this.rotateCamera(e.pointerCoordinates()),e.isSecondaryDown()&&this.moveCamera(e.pointerCoordinates()),this.handleMouseInstruction(e),this.updateCursor(e)}handleMouseScroll(e){this.ctx.cameraController.zoom(e.zoomDelta())}handleMouseEvent(e){switch(e.source){case"up":return this.handleMouseUp(e);case"down":return this.handleMouseDown(e);case"move":return this.handleMouseMove(e);case"wheel":return this.handleMouseScroll(e)}}setupZoomEvent(e){eo(e)?this.panOrigin=el.create(this.ctx.cameraController,e):this.panOrigin=null}handleZoomEvent(e){if(null===this.panOrigin)return;let t=this.panOrigin.touchData.boundingBox(),n=e.boundingBox(),i=this.panOrigin.zoomDistance,s=(n.diagonal()-t.diagonal())*.01;this.ctx.cameraController.setZoom(i-s)}handleTouchDisplayClick(e){if(!this.isOverDisplay(e.pointerCoordinates()))return;let t=()=>{this.clearMouseInstruction(),this.manager.changeState(ev.MonitorView)},n=U(I.fromTouchData(e,800,t,null));this.manager.emitUserInteractionEvent(n)}handleTouchStart(e){ea(e)&&this.handleTouchDisplayClick(e),this.setupZoomEvent(e),this.clearMoveCamera(),this.clearRotateCamera()}handleTouchMove(e){(e.hasTouchesDown(2)||e.hasTouchesDown(3))&&this.moveCamera(e.pointerCoordinates()),e.hasTouchesDown(1)&&this.rotateCamera(e.pointerCoordinates()),eo(e)&&this.handleZoomEvent(e)}handleTouchEnd(e){this.clearMoveCamera(),this.clearRotateCamera()}handleTouchEvent(e){switch(e.source){case"start":return this.handleTouchStart(e);case"move":return this.handleTouchMove(e);case"end":return this.handleTouchEnd(e)}}constructor(e,t){super(e,t),this.previousMovementData=null,this.previousRotationData=null,this.panOrigin=null,this.wasOverDisplay=!1,this.isOverDisplay=er(this.ctx)}}class em extends Y{transition(){let e=eu(this.ctx.scene);if(!e)return;let{spherical:t,position:n,distance:i}=((e,t,n)=>{let i=e.geometry.boundingBox,s=i.max.x-i.min.x,r=i.max.y-i.min.y,a=i.max.z-i.min.z,l=new o.Pq0(i.min.x+s/2,i.min.y+r/2,i.min.z+a/2),c=new o.Pq0;c.add(e.position),c.add(l);let u=new o.YHV;u.phi=Math.atan2(r,a),new o.Pq0().setFromSpherical(u);let h=Math.tan((0,L.pu)(t/2)),[d,m]=[window.innerWidth,window.innerHeight];return{spherical:u,position:c,distance:h*(s/2+n/(d/m))}})(e,this.ctx.cameraController.getCamera().fov,2.4),s=()=>{this.ctx.disableWebGLPointerEvents(),this.ctx.cameraController.setOriginBoundaryX(2),this.ctx.cameraController.setOriginBoundaryY(1.5),document.getElementById("operating-system-iframe").focus()};this.ctx.cameraController.enableDamping(),this.ctx.cameraController.transition(n,t,i,1250/i,L.Cc,s),this.ctx.cameraController.setMinZoom(1),this.ctx.cameraController.setMaxZoom(5),this.ctx.cameraController.setOriginBoundaryX(null),this.ctx.cameraController.setOriginBoundaryY(null)}setupZoomEvent(e){eo(e)?this.panOrigin=el.create(this.ctx.cameraController,e):this.panOrigin=null}handleZoomEvent(e){if(null===this.panOrigin)return;let t=this.panOrigin.touchData.boundingBox(),n=e.boundingBox(),i=this.panOrigin.zoomDistance,s=(n.diagonal()-t.diagonal())*.01;this.ctx.cameraController.setZoom(i+s)}updateCursor(e){let t=this.isOverDisplay(e),n=()=>t!==this.wasOverDisplay,i=eh(e.x,e.y);if(t||i){this.ctx.disableWebGLPointerEvents(),this.ctx.setCursor("auto");let e=q();this.manager.emitUserInteractionEvent(e)}else if(this.ctx.enableWebGLPointerEvents(),this.ctx.setCursor("pointer"),n()){let t=N(k.fromMouseData(e,"Click to zoom out"));this.manager.emitUserInteractionEvent(t)}this.wasOverDisplay=t}onUserEvent(e){switch(e.event){case"mouse_event":return this.handleMouseEvent(e.data);case"touch_event":return this.handleTouchEvent(e.data)}}handleMouseDown(e){var t,n,i;if(t=e.isPrimaryDown(),n=e.x,i=e.y,t&&eh(n,i)||this.isOverDisplay(e))return;let s=q();this.manager.emitUserInteractionEvent(s),this.manager.changeState(ev.FreeRoam)}handleMouseMove(e){this.updateCursor(e)}handleMouseEvent(e){switch(e.source){case"down":return this.handleMouseDown(e);case"move":return this.handleMouseMove(e)}}handleTouchOutsideDisplay(e){var t,n,i;let s=e.pointerCoordinates();if(t=e.hasTouchesDown(1),n=s.x,i=s.y,t&&eh(n,i))return;let r=()=>{this.manager.changeState(ev.FreeRoam)},a=U(I.fromTouchData(e,800,r,null));this.manager.emitUserInteractionEvent(a)}handleOwnOriginTouchStart(e){ea(e)&&this.handleTouchOutsideDisplay(e)}handleRpcOriginTouchStart(e){this.setupZoomEvent(e)}handleTouchEvent(e){"start"===e.source&&"self"===e.origin&&this.handleOwnOriginTouchStart(e),"start"===e.source&&ec(e)&&this.handleRpcOriginTouchStart(e),"move"===e.source&&ec(e)&&this.handleZoomEvent(e)}constructor(e,t){super(e,t),this.panOrigin=null,this.wasOverDisplay=!1,this.isOverDisplay=er(this.ctx)}}function ep(e){e.setPanOffsetY(7),e.setPanOffsetZ(3),e.update(0)}class ef extends X{transition(){if(!eu(this.ctx.scene))return;this.ctx.isInitialScene()&&ep(this.ctx.cameraController);let e=new o.Pq0;e.y=6.8;let t=new o.YHV;t.phi=1,t.theta=this.calculateRotation(0);let n=this.ctx.isInitialScene()?this.initialTransitionMs:this.otherTransitionsMs;this.ctx.cameraController.transition(e,t,10,n,O,()=>{this.progress=0}),this.ctx.setCursor("pointer")}calculateRotation(e){e%=100;let t=(0,L.pu)(-30),n=(0,L.pu)(30),i=e<50,s=-(Math.cos(Math.PI*(i?e/50:(e-50)/50))-1)/2,r=n-t;return i?t+r*s:n-r*s}update(e){this.progress+=this.cameraRotationSpeed*e,this.ctx.cameraController.setRotationTheta(this.calculateRotation(this.progress)),this.progress%=100}onUserEvent(e){switch(e.event){case"mouse_event":return this.handleMouseEvent(e.data);case"touch_event":return this.handleTouchEvent(e.data)}}toggleHasBeenOverDisplay(e){e&&(this.wasOverDisplay||(this.hasBeenOverDisplay=!0))}handleOverMonitor(e){let t=this.isOverDisplay(e);this.toggleHasBeenOverDisplay(t),t&&this.hasBeenOverDisplay&&this.manager.changeState(ev.MonitorView),this.wasOverDisplay=t}handleMouseClickEvent(e){if(e.isPrimaryDown()){var t,n,i;t=!0,n=e.x,i=e.y,t&&eh(n,i)||this.manager.changeState(ev.MonitorView)}}handleMouseEvent(e){this.handleOverMonitor(e),this.handleMouseClickEvent(e)}handleTouchStartEvents(e){var t,n,i;let s=e.pointerCoordinates();t=e.hasTouchesDown(1),n=s.x,i=s.y,t&&eh(n,i)||this.manager.changeState(ev.MonitorView)}handleTouchEvent(e){"start"===e.source&&this.handleTouchStartEvents(e)}constructor(e,t){super(e,t),this.cameraRotationSpeed=7.5,this.initialTransitionMs=2e3,this.otherTransitionsMs=500,this.hasBeenOverDisplay=!1,this.wasOverDisplay=!0,this.progress=0,this.isOverDisplay=er(this.ctx)}}class eg{get cameraController(){return this._cameraController}get webglNode(){return this._webglNode}get scene(){return this._cameraController.getScene()}transitionScene(){this.initialScene=!1}isInitialScene(){return this.initialScene}setCursor(e){this._webglNode.style.cursor=e}enableWebGLPointerEvents(){this._webglNode.style.pointerEvents="auto"}disableWebGLPointerEvents(){this._webglNode.style.pointerEvents="none"}constructor(e,t){this._cameraController=e,this._webglNode=t,this.initialScene=!0}}var ev=function(e){return e[e.FreeRoam=0]="FreeRoam",e[e.MonitorView=1]="MonitorView",e[e.Cinematic=2]="Cinematic",e}({});class ew{destroy(){this.userInteractionEventBusUnsubscribeHandler()}stateToInstance(e){switch(e){case 0:return new ed(this,this.ctx);case 1:return new em(this,this.ctx);case 2:return new ef(this,this.ctx);default:throw Error("unsupported state")}}getContext(){return this.ctx}changeState(e){!this.state.isTransitioning()&&(this.getContext().setCursor("default"),this.state=this.stateToInstance(e),this.state.transition(),this.getContext().transitionScene(),this.onChangeState&&this.onChangeState(e))}emitUserInteractionEvent(e){this.userInteractionEventBus.emit(e)}onUserInteractionEvent(e){this.state.onUserEvent(e)}update(e){this.state instanceof X&&this.state.update(e)}constructor(e,t,n,i){this.userInteractionEventBus=n,this.onChangeState=i,this.ctx=new eg(e,t),this.state=this.stateToInstance(2),this.state.transition(),this.userInteractionEventBusUnsubscribeHandler=this.userInteractionEventBus.subscribe(this.onUserInteractionEvent.bind(this))}}class ex{allowInput(){var e;return null!=(e=this.allowInputRef.current)&&e}create(){window.addEventListener("touchstart",this.onTouchStartListener),window.addEventListener("touchmove",this.onTouchMoveListener),window.addEventListener("touchend",this.onTouchEndListener)}destroy(){window.removeEventListener("touchstart",this.onTouchStartListener),window.removeEventListener("touchmove",this.onTouchMoveListener),window.removeEventListener("touchend",this.onTouchEndListener)}onTouchStart(e){if(!this.allowInput())return;let t=W(A.fromTouchEvent("start",e));this.handler.emitUserInteractionEvent(t)}onTouchMove(e){if(!this.allowInput())return;let t=W(A.fromTouchEvent("move",e));this.handler.emitUserInteractionEvent(t)}onTouchEnd(e){if(!this.allowInput())return;let t=W(A.fromTouchEvent("end",e));this.handler.emitUserInteractionEvent(t)}constructor(e,t){this.allowInputRef=e,this.handler=t,this.onTouchStartListener=this.onTouchStart.bind(this),this.onTouchMoveListener=this.onTouchMove.bind(this),this.onTouchEndListener=this.onTouchEnd.bind(this),this.create()}}class eb{static fromConfirmationData(e){return new eb(e.x,e.y,e.instruction)}constructor(e,t,n){this.x=e,this.y=t,this.instruction=n}}class ey{static fromConfirmationData(e,t){return new ey(e.x,e.y,t)}constructor(e,t,n){this.x=e,this.y=t,this.progress=n}}var eC=n(6931),e_=n.n(eC);function eS(e){let{isSoundEnabled:t,toggleSound:n}=e.sound;return(0,i.jsx)("button",{className:e_()["mute-button"],onClick:()=>n(),children:(0,i.jsx)("img",{draggable:!1,src:t?"/icons/mute-icon.svg":"/icons/unmute-icon.svg",width:25,height:20})})}function eE(e){let{targetState:t,cameraHandler:n}=e;return(0,i.jsx)("button",{className:e_()["camera-button"],onClick:()=>void(n.current&&n.current.changeState(t)),children:(0,i.jsx)("img",{draggable:!1,src:"/icons/camera.svg",width:25,height:20})})}function eM(e){let{state:t,cameraHandler:n,sound:s}=e,r=(0,a.useRef)(!0),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[h,d]=(0,a.useState)(""),[m,p]=(0,a.useState)(!1),f=t===ev.FreeRoam;function g(e){let t=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0"),i=String(e.getSeconds()).padStart(2,"0");return"".concat(t,":").concat(n,":").concat(i)}return(0,a.useEffect)(()=>{if(f&&r.current){function e(e,t,n){setTimeout(()=>v(e,t,35),35*n)}let t="Hayley Bloch",n="Fabrication Enthusiast";e(()=>t,l,0),e(()=>n,u,t.length+1),e(()=>g(new Date),d,t.length+n.length+2);let i=(8+t.length+n.length+2)*35;setTimeout(()=>{setInterval(()=>{d(g(new Date))},1e3)},i),setTimeout(()=>{p(!0)},i+35),r.current=!1}},[t]),(0,i.jsxs)("div",{className:w([e_()["name-container"],f?e_()["fade-in"]:e_()["fade-out"]]),children:[(0,i.jsx)("div",{children:o&&(0,i.jsx)("span",{children:o})}),(0,i.jsx)("div",{children:c&&(0,i.jsx)("span",{children:c})}),(0,i.jsxs)("div",{children:[h&&(0,i.jsx)("span",{className:"".concat(m?e_()["time-is-done"]:""),children:h}),m&&(0,i.jsx)(eS,{sound:s}),m&&(0,i.jsx)(eE,{targetState:ev.MonitorView,cameraHandler:n})]})]})}function eD(e){let{state:t,cameraHandler:n,sound:s}=e,r=t===ev.Cinematic||t===ev.MonitorView;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:w([e_()["sound-container"],r?null:e_()["fade-out"]]),children:[(0,i.jsx)(eS,{sound:s}),(0,i.jsx)(eE,{targetState:t===ev.Cinematic?ev.MonitorView:ev.Cinematic,cameraHandler:n})]})})}function eP(e){let{state:t}=e,[n,s]=(0,a.useState)(""),r=t===ev.Cinematic;return(0,a.useEffect)(()=>{if(!r)return;let e=v(()=>"Click anywhere to start",s,35);return()=>{e()}},[t]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:e_()["cinematic-container"],children:(0,i.jsxs)("span",{className:w([e_()["cinematic-instructions"],r?null:e_()["fade-out"]]),children:[n,(0,i.jsx)("span",{className:e_()["blinking-cursor"]})]})})})}function eT(e){let{cameraHandlerState:t,cameraHandler:n,soundService:s}=e,r=function(e){let[t,n]=(0,a.useState)(!0);function i(){n(!0),e.enable()}function s(){n(!1),e.disable()}return{isSoundEnabled:t,toggleSound:function(){t?s():i()},enableSound:i,disableSound:s}}(s);return(0,i.jsxs)("div",{className:e_().ui,children:[(0,i.jsx)(eD,{state:t,cameraHandler:n,sound:r}),(0,i.jsx)(eM,{state:t,cameraHandler:n,sound:r}),(0,i.jsx)(eP,{state:t,sound:r})]})}class eL{notifyOtherWebpage(e){x({method:"enable_sound_message",enabled:e})}notify(e){for(let t of this.observers)t(e)}enable(){this.enabled=!0,this.notify(this.enabled),this.notifyOtherWebpage(this.enabled)}disable(){this.enabled=!1,this.notify(this.enabled),this.notifyOtherWebpage(this.enabled)}mute(e){var t;let n=null!=(t=this.activeAudio[e])?t:null;n&&(n.muted=!0)}unmute(e){var t;let n=null!=(t=this.activeAudio[e])?t:null;n&&(n.muted=!1)}volume(e,t){var n;let i=null!=(n=this.activeAudio[e])?n:null;i&&(i.volume=t)}muteAll(){for(let e of this.activeAudio.keys())this.mute(e)}unmuteAll(){for(let e of this.activeAudio.keys())this.unmute(e)}stop(e){var t;let n=null!=(t=this.activeAudio[e])?t:null;n&&(n.pause(),delete this.activeAudio[e])}clear(){this.index=0,this.activeAudio=[]}play(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.index++,i=new Audio(e);return i.volume=t,i.muted=!this.enabled,i.play(),this.activeAudio[n]=i,i.addEventListener("ended",()=>{delete this.activeAudio[n]}),n}playOnRepeat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.index++,i=new Audio(e);return i.volume=t,i.muted=!this.enabled,i.play(),this.activeAudio[n]=i,i.addEventListener("ended",()=>{var e;null==(e=this.activeAudio[n])||e.play()}),n}subscribe(e){return this.observers.push(e),()=>{this.unsubscribe(e)}}unsubscribe(e){for(let[t,n]of this.observers.entries())if(n===e)return void this.observers.splice(t)}constructor(){this.observers=[],this.enabled=!1,this.index=0,this.activeAudio=[]}}function ej(e){let{cameraHandlerState:t,soundService:n}=e,s=(0,a.useRef)(!1);return(0,a.useEffect)(()=>()=>{},[]),(0,a.useEffect)(()=>{s.current=t===ev.MonitorView},[t]),(0,i.jsx)(i.Fragment,{})}function eO(){return new URLSearchParams(window.location.search).has("debug")}function eF(){return window.innerWidth<500}function eB(){let e=window.innerWidth,t=window.innerHeight;return m()&&(1&e&&e++,1&t&&t++),[e,t]}async function eR(e){return new Promise(t=>setTimeout(t,e))}let ek=null,eI=e=>{let[t,s]=(0,a.useState)(ev.Cinematic),r=(0,a.useRef)(new eL),{loading:l,showMessage:p,scenes:v,actions:w}=e,_=(0,a.useRef)(null),S=(0,a.useRef)(null),M=(0,a.useRef)(null),D=(0,a.useRef)(!1),[T,L]=(0,a.useState)(!1),j=new R,O=(e=>{let[t,n]=(0,a.useState)(null),s=null;function r(e){switch(e.event){case"mouse_event":var t=e.data;if(!s)return;let i=s;i.x=t.x,i.y=t.y;return;case"mouse_confirmation_event":return void(s=e.data);case"cancel_mouse_confirmation_event":return void(s=null,n(null))}}function o(){s&&n(eb.fromConfirmationData(s))}return((0,a.useEffect)(()=>{let t=e.subscribe(r),n=setInterval(o,.25);return()=>{t(),clearInterval(n)}},[]),null===t)?(0,i.jsx)(i.Fragment,{}):function(e){let t={top:e.y+-40,left:e.x+-40,zIndex:1e4,padding:"8px",position:"fixed",color:"#fff",background:"#000",userSelect:"none",pointerEvents:"none",fontFamily:"Metropolis Medium",whiteSpace:"nowrap"};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:t,children:e.instruction})})}(t)})(j),B=(e=>{let[t,n]=(0,a.useState)(null),s=null;function r(){s=null,n(null)}function o(){(null==s?void 0:s.callbackCancelation)!==null&&(null==s||s.callbackCancelation()),r()}function l(e){switch(e.event){case"touch_event":var t;return void((t=e.data).hasMoreTouchesDownThan(1)&&o(),!function(e){if(null===s)return!1;let[t,n]=[s.x,s.y],{x:i,y:r}=e.pointerCoordinates(),a=Math.abs(n-r);return 25>Math.abs(t-i)&&a<25}(t)&&o());case"touch_confirmation_event":var i=e.data;s=i,n(ey.fromConfirmationData(i,0));return}}function c(){if(null===s)return;let e=Math.min((Date.now()-s.creationTime)/s.durationInMS,1);n(ey.fromConfirmationData(s,e)),1===e&&(null==s||s.callbackSuccess(),r())}return((0,a.useEffect)(()=>{let t=e.subscribe(l),n=setInterval(c,.25);return()=>{t(),clearInterval(n)}},[]),null===t)?(0,i.jsx)(i.Fragment,{}):function(e){let[t,n]=[e.x,e.y],s=Math.max(Math.min(1,e.progress),0),r=2*Math.PI*50;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{style:{top:n-70,left:t-70,height:140,width:140,position:"absolute",userSelect:"none",WebkitUserSelect:"none",touchAction:"none"},children:(0,i.jsxs)("svg",{width:140,height:140,viewBox:"0 0 ".concat(140," ").concat(140),style:{transform:"rotate(-90deg)"},children:[(0,i.jsx)("circle",{r:50,cx:70,cy:70,fill:"transparent",stroke:"#ffffff",strokeWidth:"".concat(20,"px")}),(0,i.jsx)("circle",{r:50,cx:70,cy:70,fill:"transparent",stroke:"#99e550",strokeWidth:"".concat(20,"px"),strokeDasharray:"".concat(r,"px"),strokeDashoffset:"".concat(r*(1-s),"px")})]})})})}(t)})(j),k=(0,a.useRef)(null);function I(e){s(e)}return(0,a.useEffect)(()=>{let e,t,i;if(!v||!v.sourceScene||!v.cutoutScene||!v.cssScene)return;let s=_.current,r=S.current,a=eO();if(null==s||null==r)return;let l=null,c=null;a&&(async()=>{try{ek||(ek=await n.e(223).then(n.bind(n,3223))),c=new ek.default,r.appendChild(c.dom)}catch(e){}})();let[p,T]=eB(),[L,O,B]=[v.sourceScene,v.cutoutScene,v.cssScene],R=((e,t)=>{let n=new o.ubm(e,t,.1,1e3);return n.position.z=5,n})(75,p/T),[Z,z]=function(e,t){let n=new u.JeP({antialias:!0,alpha:!1,powerPreference:"high-performance"});n.shadowMap.enabled=!0,n.shadowMap.type=o.RyA;let i=new b.a0;return n.setSize(e,t),i.setSize(e,t),[n,i]}(p,T);Z.setPixelRatio(window.devicePixelRatio),Z.outputColorSpace=o.er$,f(s),f(r);let A=new F(R,L,O),U=new ew(A,r,j,I),N=new V(D,U),q=new ex(D,U);M.current=U;let W=function(e){let t=function(e){var t;switch(null!=(t=e.data.method)?t:null){case"camera_zoom_distance_request":return h({method:"camera_zoom_distance_request"});case"set_possible_camera_parameters_request":return h({method:"set_possible_camera_parameters_request",currentZoom:e.data.currentZoom,horizontalOffset:e.data.horizontalOffset,verticalOffset:e.data.verticalOffset});case"set_camera_parameters_request":return h({method:"set_camera_parameters_request",currentZoom:e.data.currentZoom,horizontalOffset:e.data.horizontalOffset,verticalOffset:e.data.verticalOffset});case"touch_interaction_request":return h({method:"touch_interaction_request",data:e.data.data});case"mounted":return h({method:"mounted"});default:return{ok:!1,value:Error("Not a deserializable data structure")}}}(e);if(!t.ok)return;let n=t.value,i=U.getContext().cameraController;switch(n.method){case"set_possible_camera_parameters_request":i.getMinZoom(),i.getMaxZoom(),n.currentZoom;break;case"camera_zoom_distance_request":{let t=i.getMinZoom(),n=i.getMaxZoom(),s=i.getZoom();d(e.source,{method:"camera_zoom_distance_response",max_distance:n,min_distance:t,current_distance:s,max_horizontal_offset:10,horizontal_offset:0,max_vertical_offset:10,vertical_offset:0})}break;case"set_camera_parameters_request":{let e=n.currentZoom;i.setZoom(e),i.setPanOffsetX(n.horizontalOffset),i.setPanOffsetY(n.verticalOffset)}break;case"mounted":d(e.source,{method:"display_size",width:window.innerWidth,height:window.innerHeight})}},H=(e=Z,t=p,i=T,new y.s(e,((e,t,n)=>new o.nWS(t,n,{minFilter:o.k6q,magFilter:o.k6q,format:o.GWd,depthTexture:new o.VCu(t,n)}))(0,t,i))),Y=new E(L,O,R,p,T);H.addPass(Y);let X=new C.F(L,R);X.resolution.set(128,128),X.params.saoBias=100,X.params.saoIntensity=6e-4,X.params.saoBlur=!1,H.addPass(X);let G=new P(p,T);H.addPass(G),s.appendChild(z.domElement),r.appendChild(Z.domElement);let J=function(e){null==k.current&&(k.current=e);let t=(e-k.current)*.001;for(let n of(k.current=e,l=requestAnimationFrame(J),a&&c&&c.begin(),w))n(t);H.render(),R.matrixWorldAutoUpdate=!1,R.updateMatrixWorld(),m()&&(R.matrixWorldInverse.elements[15]=-1),z.render(B,R),R.matrixWorldAutoUpdate=!0,A.update(t),U.update(t),a&&c&&c.end()},K=function(){let[e,t]=eB();H.setSize(e,t),Z.setSize(e,t),z.setSize(e,t),R.aspect=e/t,R.updateProjectionMatrix(),x({method:"display_size",width:window.innerWidth,height:window.innerHeight})},Q=function(){l&&cancelAnimationFrame(l),g(s),g(r),Z.dispose(),Z.forceContextLoss(),N.destroy(),q.destroy(),U.destroy(),s.removeChild(z.domElement),r.removeChild(Z.domElement),window.removeEventListener("resize",K,!1),window.removeEventListener("message",W,!1)};return window.addEventListener("resize",K,!1),window.addEventListener("message",W,!1),J(performance.now()),()=>Q()},[]),(0,a.useEffect)(()=>{!p&&(D.current=!0,L(!0),M.current&&M.current.changeState(ev.Cinematic))},[p]),(0,a.useEffect)(()=>{!l&&M.current&&ep(M.current.getContext().cameraController)},[l]),(0,i.jsxs)("div",{className:c().renderer,children:[T&&(0,i.jsx)(eT,{cameraHandlerState:t,cameraHandler:M,soundService:r.current}),(0,i.jsx)("div",{className:c()["css-output"],ref:_}),(0,i.jsx)("div",{className:c()["webgl-output"],ref:S}),O,B,(0,i.jsx)(ej,{cameraHandlerState:t,soundService:r.current})]})};var eZ=n(6990);class ez{constructor(e,t,n,i,s){this.debug=e,this.renderer=t,this.textureLoader=n,this.gltfLoader=i,this.scenes=s}}class eA{progress(){return{loaded:this.listLoadedEntries().length,total:this.listAllEntries().length}}listAllEntries(){return this.entries}listLoadedEntries(){return this.entries.filter(e=>e.downloaded&&e.processed)}listTotalProgressPerLoadedEntry(e){let t=this.listLoadedEntries(),n=100/this.entries.length,i=t.map((e,t)=>({entry:e,total:n*(t+1)}));if(e){let t=i.length-e,n=i.length;return i.slice(t,n)}return i}isDoneLoading(){return this.listLoadedEntries().length===this.listAllEntries().length}constructor(e){this.entries=e}}class eU{init(e){let t=new o.Tap(this.loadingManager),n=new eZ.B(this.loadingManager),i=new u.JeP;this.context=new ez(e,i,t,n,this.rendererScenes)}setDebug(e){this.context&&(this.context.debug=e)}getRenderScenes(){var e,t;return null!=(t=null==(e=this.context)?void 0:e.scenes)?t:null}add(e,t){let n=null===t.downloader,i=null===t.builder;this.assets[e]={name:e,assetLoader:t,inScene:!1,order:this.index++,downloaded:n,processed:i}}reset(){let e=this.rendererScenes;this.index=0,this.assets={},e.sourceScene.clear(),e.cutoutScene.clear(),e.cssScene.clear()}loadingProgress(){return new eA(Object.values(this.assets).sort((e,t)=>e.order-t.order).map(e=>({name:e.name,downloaded:e.downloaded,processed:e.processed})))}async load(e,t){this.context||this.init(!1);let n=[],i=Object.values(this.assets).map(e=>(async()=>{let n=e.assetLoader.downloader;n&&!e.downloaded&&(await n(this.context),e.downloaded=!0,t&&t())})());for(let s of(await Promise.all(i),Object.values(this.assets).sort((e,t)=>e.order-t.order))){let i=s.assetLoader.builder;if(s.inScene||!i)continue;if(s.assetLoader.builderProcessTime&&await eR(s.assetLoader.builderProcessTime),e&&e.aborted)return{updateActions:[]};let r=i(this.context);if(s.processed=!0,r)for(let e of r)n.push(e);t&&t()}return{updateActions:n}}constructor(e,t){this.rendererScenes=e,this.loadingManager=t,this.context=null,this.index=0,this.assets={}}}var eN=n(8186),eq=n.n(eN);function eW(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\xa0",s=Math.max(0,t-1-(null!=(n=null==e?void 0:e.length)?n:0));return i.repeat(s)+"\xa0"}function eH(e){let t=Number(e.downloaded)+Number(e.processed),n="".concat(e.name," (").concat(t,"/").concat(2,")");return(0,i.jsxs)("li",{style:{fontFamily:"monospace"},"aria-label":n,children:[e.name,eW(e.name,30,"."),"(",t,"/",2,")"]},"".concat(e.name,"-").concat(+!!e.downloaded,"-").concat(+!!e.processed))}function eV(){let e="Hayley Bloch",t="HTMAA HAYLEY BLOCH",n=new Date().getFullYear();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:eq().bold,children:e}),eW(e,16),(0,i.jsxs)("span",{children:["Released: September ",n]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:eq().bold,children:t}),eW(t,16),(0,i.jsxs)("span",{children:["HTMAA \xa9 ",n," Hayley Bloch"]})]}),(0,i.jsx)("br",{})]})}function eY(e){let{onClick:t}=e,[n,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=()=>s(eF());e();let t=null,n=()=>{t&&cancelAnimationFrame(t),t=requestAnimationFrame(e)};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),t&&cancelAnimationFrame(t)}},[]),(0,i.jsx)("div",{className:eq()["user-message"],children:(0,i.jsx)("div",{className:eq()["user-message-position-container"],children:(0,i.jsxs)("div",{className:eq()["user-message-container"],children:[(0,i.jsx)("h1",{children:"Portfolio of Hayley Bloch"}),n&&(0,i.jsx)("p",{className:eq().warning,children:"WARNING: This portfolio is best experienced on a desktop, laptop, or a tablet computer"}),(0,i.jsxs)("p",{children:[(0,i.jsx)("span",{className:eq()["continue-text"],children:"Click continue to begin"}),(0,i.jsx)("span",{className:eq()["blinking-cursor"]})]}),(0,i.jsx)("div",{className:eq()["button-center-container"],children:(0,i.jsx)("button",{onClick:t,autoFocus:!0,"aria-label":"Continue to portfolio",children:"Continue"})})]})})})}function eX(){let e="Melchior, Magi 1",t="Balthasar, Magi 2",n="Casper, Magi 3";return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{children:"Magi, Hayleysoft, bv, 1998 to 2024"}),(0,i.jsx)("h3",{children:"Components"}),(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[e,eW(e,30,"."),"Linked"]}),(0,i.jsxs)("li",{children:[t,eW(t,30,"."),"Linked"]}),(0,i.jsxs)("li",{children:[n,eW(n,30,"."),"Linked"]})]})]})}function eG(){return(0,i.jsx)("div",{className:eq()["loading-underscore"],children:(0,i.jsx)("span",{className:eq()["blinking-cursor"]})})}function eJ(){return null}function eK(){let[e,t]=(0,a.useState)(!0),[s,r]=(0,a.useState)(!0),[l,c]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!0),d=(0,a.useRef)(function(){let e=new o.Z58;return e.background=new o.Q1f(0xfefefe),{sourceScene:e,cutoutScene:new o.Z58,cssScene:new o.Z58}}()),p=(0,a.useRef)(null),f=(0,a.useRef)([]),[g,v]=(0,a.useState)(null),[w,x]=(0,a.useState)(null);return((0,a.useEffect)(()=>{let e,i,s,r,a,l,c,u,h,g,w,y,C,_,S,E,M,D,P=function(){var e=document.createElement("canvas");let t=e.getContext("webgl")||e.getContext("experimental-webgl");return!!t&&t instanceof WebGLRenderingContext}();if(x(P),!P)return;p.current=new eU(d.current,new o.KPJ);let j=p.current;j.init(eO()),j.reset(),[["Linked to Magi 1",es()],["Linked to Magi 2",es()],["Linked to Magi 3",es()],["Loading desk",(e=null,i=null,{downloader:async function t(t){let n=async()=>{i=await Q(t,"/assets/Desk.jpg")},s=async()=>{e=await $(t,"/assets/Desk.glb")};await Promise.all([n(),s()])},builder:function(t){if(!i||!e)return null;for(let t of e.scene.children)t.userData[T.CameraCollidable]=!0;let n=new o._4j({map:i,roughness:1,metalness:0});return e.scene.traverse(e=>{e instanceof o.eaF&&"Desk"===e.name&&(e.material=n,e.receiveShadow=!0)}),t.scenes.sourceScene.add(e.scene),null},builderProcessTime:0})],["Loading cables",(s=null,{downloader:async function e(e){s=await $(e,"/assets/Cables.gltf")},builder:function(e){if(!s)return null;let t=new o.V9B({color:3158064});return s.scene.traverse(e=>{e instanceof o.eaF&&(e.material=t)}),e.scenes.sourceScene.add(s.scene),null},builderProcessTime:0})],["Loading mouse",(r=null,a=null,{downloader:async function e(e){let t=async()=>{r=await Q(e,"/assets/Mouse.jpg")},n=async()=>{a=await $(e,"/assets/Mouse.glb")};await Promise.all([t(),n()])},builder:function(e){if(!a||!r)return null;let t=new o.V9B({map:r});return a.scene.traverse(e=>{e instanceof o.eaF&&(e.material=t)}),e.scenes.sourceScene.add(a.scene),null},builderProcessTime:0})],["Loading lights",{downloader:null,builder:function(e){let t=new o.$p8(4210752);t.intensity=5,e.scenes.sourceScene.add(t);let n=new o.ZyN(0xffffff,.55);n.position.set(5,10,5),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048;let i=n.shadow.camera;i.near=.1,i.far=50,i.left=-10,i.right=10,i.top=10,i.bottom=-10,n.shadow.bias=-5e-4,n.shadow.blurSamples=32,e.scenes.sourceScene.add(n);let s=new o.dth(0xffffff,8947848,.4);return e.scenes.sourceScene.add(s),null},builderProcessTime:0}],["Loading floor",(l=null,c=null,{downloader:async function e(e){let t=async()=>{c=await Q(e,"/assets/SmoothFloor.jpg")},n=async()=>{l=await $(e,"/assets/SmoothFloor.glb")};await Promise.all([t(),n()])},builder:function(e){if(!c||!l)return null;ee(l),e.scenes.sourceScene.add(l.scene);let t=new o.V9B({map:c});return l.scene.traverse(e=>{e instanceof o.eaF&&(e.material=t)}),null},builderProcessTime:0})],["Loading plant",(u=null,h=null,{downloader:async function e(e){let t=async()=>{u=await $(e,"/assets/Plant.glb")},n=async()=>{h=await Q(e,"/assets/Plant.jpg")};await Promise.all([t(),n()])},builder:function(e){if(!u)return null;let t=new o.V9B({map:h});return u.scene.traverse(e=>{e instanceof o.eaF&&(e.material=t)}),e.scenes.sourceScene.add(u.scene),null},builderProcessTime:0})],["Loading Alchemical Hydra",(g=null,{downloader:async function e(e){g=await e.gltfLoader.loadAsync("/assets/Bust.gltf")},builder:function(e){if(!g)return null;let t=g.scene;t.scale.setScalar(.55),t.rotateY(-Math.PI/1.5),t.traverse(e=>{if(e.isMesh){e.castShadow=!0,e.receiveShadow=!0,e.material=new o._4j({color:0xffffff,roughness:.9,metalness:0,emissive:0xffffff,emissiveIntensity:.2});let t=e.geometry;t&&"function"==typeof t.computeVertexNormals&&t.computeVertexNormals()}});let n=ei(e.scenes.sourceScene);n&&(en(t,n,.002),t.position.x+=5.75,t.position.z-=1),e.scenes.sourceScene.add(t);let i=new o.ZyN(0xffffff,.35);return i.position.set(-6,7,-4),i.castShadow=!1,e.scenes.sourceScene.add(i),null},builderProcessTime:0})],["Loading Iris Box",(w=null,{downloader:async function e(e){var t;let{OBJLoader:i}=await n.e(476).then(n.bind(n,6476)),s=new i(null==(t=e.gltfLoader)?void 0:t.manager);w=await s.loadAsync("/assets/iris-box.obj")},builder:function(e){if(!w)return null;let t=w;t.scale.setScalar(.15),t.rotateY(Math.PI/6),t.rotateX(Math.PI/2),t.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=new o._4j({color:0xc19a6b,roughness:.85,metalness:.05}))});let n=ei(e.scenes.sourceScene);return n&&(en(t,n,.002),t.position.x-=7,t.position.z-=0),e.scenes.sourceScene.add(t),null},builderProcessTime:0})],["Loading keyboard",(C=null,_=null,{downloader:async function e(e){let t=async()=>{C=await Q(e,"/assets/KeyboardCase.jpg")},n=async()=>{_=await Q(e,"/assets/KeyboardKeyCaps.jpg")},i=async()=>{y=await $(e,"/assets/Keyboard.glb")};await Promise.all([t(),n(),i()])},builder:function(e){if(!y||!C||!_)return null;ee(y);let t=new o.V9B({map:C}),n=new o.V9B({map:_});return y.scene.traverse(e=>{e instanceof o.eaF&&("Case"===e.name?e.material=t:e.material=n)}),e.scenes.sourceScene.add(y.scene),null},builderProcessTime:0})],["Loading monitor",(E=null,M=null,D=null,{downloader:async function e(e){let t=async()=>{E=await Q(e,"/assets/Monitor.jpg")},n=async()=>{M=await Q(e,"/assets/Computer.jpg")},i=async()=>{D=await Q(e,"/assets/NamePlate.jpg")},s=async()=>{S=await $(e,"/assets/Monitor.glb")};await Promise.all([t(),n(),i(),s()])},builder:function(e){var t;if(!S||!E||!M)return null;S.scene.name=J;let n=new o.V9B({color:0});n.stencilWrite=!0,n.transparent=!0;let i=new o.V9B({map:E}),s=new o.V9B({map:M}),r=new o.V9B({map:D});S.scene.traverse(e=>{if(e instanceof o.eaF)switch(e.name){case K:e.material=n;break;case"Monitor":e.material=i;break;case"Computer":e.material=s;break;case"NamePlate":e.material=r}});let a=S.scene.children.find(e=>e.name===K),l=a.clone();a.visible=!1;let c=null!=(t=a.geometry.boundingBox)?t:new o.NRn,u=m()?.2:.1,h=c.max.x-c.min.x+u,d=.765625*h,p=c.max.z-c.min.z,f=Math.sqrt(Math.pow(p,2)+Math.pow(d,2)),g=document.createElement("div");g.style.width="".concat(1280,"px"),g.style.height="".concat(980,"px");let v=document.createElement("iframe");v.id="operating-system-iframe",v.classList.add("iframe-container"),v.style.width="100%",v.style.height="100%",v.style.backgroundColor="black",v.style.boxSizing="border-box",v.style.padding="32px",v.src=function(e){let t=function(){var e,t,n;let i=void 0!==G&&null!=(e=G.env.NEXT_PUBLIC_VERCEL_ENV)?e:"local";if("production"===i)return"https://portfolio-next-desktop.vercel.app/";if("preview"!==i&&"development"!==i)return void 0!==G&&null!=(n=G.env.NEXT_PUBLIC_TARGET_URL)?n:"http://127.0.0.1:3000/";{let e=(void 0!==G&&null!=(t=G.env.NEXT_PUBLIC_VERCEL_BRANCH_URL)?t:window.location.host).split("-"),n=e.findIndex(e=>"web"===e);return e[n]="desktop","https://"+e.join("-")}}();return e?"".concat(t,"/?debug"):t}(e.debug),g.appendChild(v);let w=new b.on(g),[x,y,C]=[c.min.x-u/2+h/2,c.min.y-u/2+d/2,c.min.z+p/2],[_,P,T]=[l.position.x+x,l.position.y+y,l.position.z+C];return w.position.set(_,P,T),w.scale.set(h/1280,f/980,1),w.rotateX(Math.atan(d/p)-(0,L.pu)(90)),e.scenes.cssScene.add(w),e.scenes.sourceScene.add(S.scene),e.scenes.cutoutScene.add(l),null},builderProcessTime:250})]].forEach(e=>{let[t,n]=e;return j.add(t,n)}),v(j.loadingProgress());let O=new AbortController;return(async()=>{let{updateActions:e}=await j.load(O.signal,()=>{v(j.loadingProgress())});O.signal.aborted||(f.current=e,t(!1))})(),()=>O.abort()},[]),(0,a.useEffect)(()=>{g&&g.isDoneLoading()&&(eO()?(c(!1),r(!1),h(!1)):(setTimeout(()=>r(!1),50),setTimeout(()=>{h(!1),eF()||c(!1)},400)))},[g]),null===w)?(0,i.jsx)(i.Fragment,{}):!1===w?(0,i.jsxs)("div",{className:eq()["loading-progress"],children:[(0,i.jsx)(eV,{}),(0,i.jsxs)("div",{className:eq()["error-container"],children:[(0,i.jsx)("h3",{children:"ERROR: No WebGL detected"}),(0,i.jsx)("p",{children:"WebGL is required to run this site."}),(0,i.jsx)("p",{children:"Please enable it or switch to a browser that supports WebGL."})]})]}):(0,i.jsxs)(i.Fragment,{children:[s&&g&&(0,i.jsxs)("div",{className:eq()["loading-progress"],children:[(0,i.jsx)(eV,{}),(0,i.jsx)(eX,{}),function(e){let t=e.listAllEntries(),n=function(e){let{loaded:t,total:n}=e.progress(),s=n>0?Math.floor(t/n*100):0;return(0,i.jsxs)("div",{"aria-live":"polite","aria-atomic":"true",children:[(0,i.jsx)("h3",{style:{marginBottom:8},children:t===n?"Finished loading resources":"Loading resources (".concat(t,"/").concat(n,") ").concat(s,"%")}),(0,i.jsx)("div",{style:{height:6,width:280,background:"rgba(255,255,255,0.2)",borderRadius:3},children:(0,i.jsx)("div",{style:{height:"100%",width:"".concat(s,"%"),background:"white",borderRadius:3}})})]})}(e),s=t.map(eH);return(0,i.jsxs)("div",{children:[n,(0,i.jsx)("ul",{children:s})]})}(g),(0,i.jsx)(eJ,{})]}),u&&(0,i.jsx)(eG,{}),l&&(0,i.jsx)(eY,{onClick:()=>c(!1)}),(0,i.jsx)(eI,{loading:e,showMessage:l,scenes:d.current,actions:f.current})]})}function eQ(){return(0,i.jsxs)("noscript",{children:[(0,i.jsx)("style",{children:"\n    html, body {\n      height: 100vh;\n      width: 100vw;\n      margin: 0;\n      padding: 0;\n      background: #000;\n    }\n\n    noscript {\n      height: 100vh;\n      width: 100vw;\n      display: block;\n      background: #000;\n      margin: 0;\n      padding: 10px;\n      color: #fff;\n      font-family: monospace;\n      font-size: 1.2em;\n      box-sizing: border-box;\n    }\n\n    .bold {\n      font-weight: bold;\n      display: block;\n    }\n\n    p {\n      display: block;\n    }\n\n    h3 {\n      color: red;\n    }\n\n    a {\n      color: lightblue;\n    }\n  "}),(0,i.jsx)("span",{className:"bold",children:"Hayley Bloch"}),(0,i.jsx)("h3",{children:"ERROR: No JS detected"}),(0,i.jsx)("p",{children:"Javascript is required for this website to work."}),(0,i.jsxs)("p",{children:["If you're interested in my resume, you can download my CV from ",(0,i.jsx)("a",{href:"/assets/cv/Hayley_Bloch_resume.pdf",target:"_blank",children:"here"}),"."]})]})}var e$=n(8388);function e0(){let[e,t]=(0,a.useState)("Hayley Bloch - Portfolio");function n(){t((document.visibilityState,"Hayley Bloch - Portfolio"))}return(0,a.useEffect)(()=>(document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r(),{children:[(0,i.jsx)("title",{children:e}),(0,i.jsx)("meta",{name:"description",content:"Portfolio website of Hayley Bloch"}),(0,i.jsx)("meta",{property:"og:title",content:"Hayley Bloch - Portfolio"}),(0,i.jsx)("meta",{property:"og:description",content:"Portfolio website of Hayley Bloch"}),(0,i.jsx)("meta",{property:"og:site_name",content:"Hayley Bloch's portfolio"}),(0,i.jsx)("link",{rel:"icon",type:"image/x-icon",href:"favicon.ico"})]}),(0,i.jsx)(eQ,{}),(0,i.jsx)(eK,{}),(0,i.jsx)(e$.j,{})]})}},6931:e=>{e.exports={ui:"RendererUI_ui__JKBL1",cinematic:"RendererUI_cinematic__cDShJ","name-container":"RendererUI_name-container__4aecl","cinematic-container":"RendererUI_cinematic-container__vA6Rq","cinematic-instructions":"RendererUI_cinematic-instructions__UEbci","fade-out":"RendererUI_fade-out__bv7uz","fade-in":"RendererUI_fade-in__xCNUF","mute-button":"RendererUI_mute-button__UIKVJ","camera-button":"RendererUI_camera-button__JV2CW","time-is-done":"RendererUI_time-is-done__tUV_J","sound-container":"RendererUI_sound-container__SINlM","blinking-cursor":"RendererUI_blinking-cursor__ptEr4",blink:"RendererUI_blink__dfWxL"}},7703:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5213)}])},8186:e=>{e.exports={"loading-progress":"SceneLoader_loading-progress__FQ2kc","loading-underscore":"SceneLoader_loading-underscore__mHCWj",bold:"SceneLoader_bold__mELB4","error-container":"SceneLoader_error-container__sSg8U",error:"SceneLoader_error__W46ZK","user-message":"SceneLoader_user-message__REedC","user-message-position-container":"SceneLoader_user-message-position-container__K6fGJ","user-message-container":"SceneLoader_user-message-container__Q6PMm","continue-text":"SceneLoader_continue-text__nBnrH","button-center-container":"SceneLoader_button-center-container__P7CzE",warning:"SceneLoader_warning__Mx9hJ","blinking-cursor":"SceneLoader_blinking-cursor__i8SFD",blink:"SceneLoader_blink__8RmYC"}}},e=>{e.O(0,[815,779,94,636,593,792],()=>e(e.s=7703)),_N_E=e.O()}]);