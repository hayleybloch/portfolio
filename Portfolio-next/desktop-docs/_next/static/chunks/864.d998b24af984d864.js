(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{2864:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(6029),o=n(3219),i=n.n(o),a=n(5729),u=n(4523),c=n(4842),s=n(9733);function l(e){let{application:t,args:n,windowContext:o}=e,[l,f]=(0,a.useState)(""),d=t.apis.fileSystem,{t:m}=(0,s.Bd)("common"),p=(0,a.useRef)();function v(e){let n=t.compositor.getById(o.id);if(!n)return;let r=(0,c.tG)(e);n.title="".concat(r," - Notes"),t.compositor.update(n)}return(0,a.useEffect)(()=>{let e=function(e){let n=function(e,t){let n=e.apis.fileSystem.getNode(t);return n.ok?"textfile"!==n.value.kind?(0,u._)(Error("node type is not a textfile")):(0,u.Ok)(n.value):n}(t,e);if(!n.ok)return n;let r=n.value;return f(r.content),p.current=r,n}(n);if(!e.ok)return;let r=d.subscribe(e.value,t=>{v(e.value)});return v(e.value),()=>{r()}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{children:(0,r.jsx)("button",{className:"system-button",onClick:function(){if(!p.current)return void function(){let e="/Users/hayley/Documents/",n=d.getDirectory(e);if(!n.ok)return;let r=m("filesystem.new_file"),i=(0,c.Q1)(n.value,r),a=()=>{};t.compositor.prompt(o.id,m("notes.create_file_instructions"),i).then(r=>{if(d.getNode("".concat(e).concat(r,".txt")).ok)return void t.compositor.alert(o.id,m("notes.create_file_duplicated_name")).catch(a);let i=d.addTextFile(n.value,r,l,!0);p.current=i,v(i)}).catch(a)}();p.current.content=l},children:"Save"})}),(0,r.jsx)("textarea",{className:["system-text-input",i().textarea].join(" "),value:l,onChange:e=>{f(e.target.value)}})]})}},3219:e=>{e.exports={textarea:"NotesView_textarea__317fZ"}}}]);